<!DOCTYPE html>

<html>

<head>
    <title>Musicord</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="js/granim.min.js" type="text/javascript"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script src="../js/annyang.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.2.3/wavesurfer.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.2.3/plugin/wavesurfer.timeline.min.js"></script>
         
</head>

<canvas id="granim-canvas"></canvas>
<body>
    
	
    <script src="granim.min.js"></script>


    <script>
    var granimInstance = new Granim({
    
        element: '#granim-canvas',
        name: 'granim',
        opacity: [1, 1],
        states: {
            "default-state": {
                gradients: [
                    ['#2ecc71', '#27ae60'],
                    ['#2980b9', '#3498db']
                ],
                transitionSpeed: 15000
            }
        }
    });
    </script>

    
    <div class="main-content">
    
    
        <div class="row">
    		<div class="large-12 medium-12 small-12 columns">
    			<div id="waveform"></div>
    			<div id="waveform-timeline"></div>
    		</div>
    	</div>
    	<div id ="SongTitle"></div>
    
        <script>
        var wavesurfer = WaveSurfer.create({
            container: '#waveform',
            barWidth: 5,
            waveColor: '#2c3e50',
            mediaControls : true,
    		hideScrollBar: true
        });
    
    	var songNames = [];
        var songList = ["SitNextToMe.mp3", "One Foot.mp3", "Kamikaze.mp3"];
        
    	for(i = 0; i < songList.length; i++){
            var ind = songList[i].indexOf(".");
            songNames[i] = songList[i].substring(0,ind); 
        }
        
    	document.getElementById("SongTitle").innerHTML = songNames[0];
        var songIndex = 0;
        
    	wavesurfer.on('ready', function () {
            var timeline = Object.create(WaveSurfer.Timeline);
    
            timeline.init({
                wavesurfer: wavesurfer,
                container: '#waveform-timeline'
            });
        });
        
    	wavesurfer.load("../music/" + songList[0]);
        
    	if (annyang) {
        	var commands = {
            	'play': function () {
                	wavesurfer.play();
                },
    
                'pause': function () {
                    wavesurfer.pause();
                },
    
                'next': function () {
                    songIndex=(songIndex + 1) % 3;
                    wavesurfer.load("Media/" + songList[songIndex]);
    				document.getElementById("SongTitle").innerHTML = songNames[songIndex];
                },
    
                'previous': function () {
                    if(songIndex == 0) {songIndex = 3;}
                    songIndex=(songIndex - 1);
                    wavesurfer.load("Media/" + songList[songIndex]);
    				document.getElementById("SongTitle").innerHTML = songNames[songIndex];
                }
            };
            annyang.addCommands(commands);
            annyang.start();
        }
    	</script>
    	
    	<div id="waveform" style="max-width:100%"></div>
    	
        
    
    
    
    
    <!-- <span class="label"> Sit Next To Me </span> -->
        <br><br><br>
        
        <div style="text-align: center">
  <button id="play-button" class="btn btn-primary" onclick="wavesurfer.play()">
    <i class="glyphicon glyphicon-play"></i>
    Play
  </button>    
  <button id="pause-button" class="btn btn-primary" onclick="wavesurfer.pause()">
    <i class="glyphicon glyphicon-play"></i>
    Pause
  </button>    
        
        <!-- <button class="control-button" id="play-button"> <i class="fa fa-play" aria-hidden="true"></i></button>
        <button class="control-button hide" id="pause-button"> <i class="fa fa-pause" aria-hidden="true"></i> </button> -->

        <br>
        <br>
        <br>
        <div class="radio-div"> 
            <input type="radio" name="track" value="1" checked disabled="true"> Sit Next To Me <br> 
            <input type="radio" name="track" value="2" disabled="true"> One Foot<br>
            <input type="radio" name="track" value="3" disabled="true"> Kamikaze
            <input id="trackname" type="text"><button type = "button" id="tracknamebtn">Queue</button>
        </div>
        </div>
    </div>

    <div class="timer-div"> <span class="timer-span">0.00</span> s </div>

    <audio preload="true" id="audio-id">
        <source src="music/SitNextToMe.mp3" class="audio-source">
            
        </audio>
    </body>

    </html>